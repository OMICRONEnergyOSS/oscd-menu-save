{"version":3,"file":"oscd-menu-save.js","sources":["../../oscd-menu-save.ts"],"sourcesContent":["export default class SaveProjectPlugin extends HTMLElement {\n  docs!: Record<string, XMLDocument>;\n  doc!: XMLDocument;\n  docName!: string;\n\n  async run(): Promise<void> {\n    if (this.doc) {\n      let documentAsString = new XMLSerializer().serializeToString(this.doc);\n\n      // Add XML declaration/prolog if it's been stripped\n      // TODO: This can be removed once the improved OpenSCD core edit API is present\n      documentAsString = documentAsString.startsWith('<?xml')\n        ? documentAsString\n        : '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + '\\n' + documentAsString;\n\n      const blob = new Blob([documentAsString], {\n        type: 'application/xml',\n      });\n\n      const a = document.createElement('a');\n      a.download = this.docName;\n      a.href = URL.createObjectURL(blob);\n      a.dataset.downloadurl = ['application/xml', a.download, a.href].join(':');\n      a.style.display = 'none';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      setTimeout(function () {\n        URL.revokeObjectURL(a.href);\n      }, 5000);\n    }\n  }\n}\n"],"names":[],"mappings":"AAAc,MAAO,iBAAkB,SAAQ,WAAW,CAAA;AAKxD,IAAA,MAAM,GAAG,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,GAAG,EAAE;AACZ,YAAA,IAAI,gBAAgB,GAAG,IAAI,aAAa,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC;;;AAItE,YAAA,gBAAgB,GAAG,gBAAgB,CAAC,UAAU,CAAC,OAAO;AACpD,kBAAE;AACF,kBAAE,wCAAwC,GAAG,IAAI,GAAG,gBAAgB;YAEtE,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,gBAAgB,CAAC,EAAE;AACxC,gBAAA,IAAI,EAAE,iBAAiB;AACxB,aAAA,CAAC;YAEF,MAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC;AACrC,YAAA,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO;YACzB,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC;YAClC,CAAC,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC,iBAAiB,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;AACzE,YAAA,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AACxB,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YAC5B,CAAC,CAAC,KAAK,EAAE;AACT,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;AAC5B,YAAA,UAAU,CAAC,YAAA;AACT,gBAAA,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC;YAC7B,CAAC,EAAE,IAAI,CAAC;QACV;IACF;AACD;;;;"}